description: |
  Run shellcheck over any shell scripts in the respository.
  Add this job to any workflow to automatically check any shell scripts
  in your repository.

executor: <<parameters.executor>>

parameters:
  exclude:
    type: string
    default: ""
    description: |
      This file pattern (as passed to `find -not -path`) is used to select
      a path to exclude when searching for files. Currently, this is
      limited to a single pattern.

  path:
    type: string
    default: .
    description: The top-most directory to search for files in.

  pattern:
    type: string
    default: "*.sh"
    description: |
      The file pattern as passed to `find` to locate shell scripts.

  output:
    type: string
    default: shellcheck.log
    description: |
      The filename of the shellcheck output, which is automatically saved
      as a job artifact.

  executor:
    type: executor
    default: default
    description: |
      Override executor with a custom executor, for example, to choose a
      different version tag.

steps:
  - checkout

  - check:
      exclude: <<parameters.exclude>>
      path: <<parameters.path>>
      pattern: <<parameters.pattern>>

  - store_artifacts:
      path: '<<parameters.output>>'
      destination: shellcheck
